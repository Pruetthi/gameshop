<app-header></app-header>

<div class="container edit-game-container">
    <mat-card class="edit-game-card">
        <h2 class="title">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏°</h2>

        <form (submit)="onUpdate($event)" enctype="multipart/form-data" class="edit-game-form">

            <!-- üîπ ‡∏£‡∏π‡∏õ‡πÄ‡∏Å‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô -->
            <div class="image-section">
                <div *ngIf="previewUrl; else noImage" class="preview">
                    <img [src]="previewUrl" alt="Game Preview" />
                </div>
                <ng-template #noImage>
                    <div class="no-image">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>
                </ng-template>

                <label for="game_image" class="upload-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏Å‡∏°</label>
                <input id="game_image" type="file" (change)="onFileSelected($event)" hidden />
            </div>

            <!-- üîπ ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°</mat-label>
                <input matInput type="text" [(ngModel)]="game.game_name" name="game_name" required />
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</mat-label>
                <textarea matInput [(ngModel)]="game.description" name="description" required rows="4"></textarea>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>‡∏£‡∏≤‡∏Ñ‡∏≤</mat-label>
                <input matInput type="number" [(ngModel)]="game.price" name="price" required />
            </mat-form-field>

            <button class="btn save-btn" type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>

            <button type="button" class="btn delete-btn" (click)="onDelete(game.game_id)">
                ‡∏•‡∏ö‡πÄ‡∏Å‡∏°
            </button>
        </form>

        <p [style.color]="messageColor" class="message">{{ message }}</p>
    </mat-card>
</div>